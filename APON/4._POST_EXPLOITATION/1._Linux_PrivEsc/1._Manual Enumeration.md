Operators Handbook pg 127

#### User Enumeration
```bash - target
history
```

```
alias
```

```bash - target
cat ~/.bash_history
```

```bash - target
whoami
```

```bash - target
id
```

```bash - target
sudo -l
```

`(ALL : ALL) ALL`

```bash - target
sudo su -
```

```bash - target
sudo -s
```

Look for ssh keys
```bash
find / -type f \( -name "id_rsa" -o -name "id_dsa" -o -name "id_ecdsa" -o -name "id_ed25519" -o -name "authorized_keys" -o -name "known_hosts" -o -name "ssh_host_*" \) 2>/dev/null
```

cat passwd and check for write privs:
```bash - target
cat /etc/passwd && echo "" && ls -lah /etc/passwd
```

cat passwd, grep non shell accounts:
```bash - target
cat /etc/passwd | grep -v "nologin" | grep -v "false"
```

append for just usernames:
```bash - target
 | cut -d : -f 1
```

check for shadow readability:
```bash - target
cat /etc/shadow
```

```bash - target
cat /etc/group
```

Check for other users:
```bash - target
ls /home
```

#### Network Enumeration
```bash - target
ifconfig
```

```bash - target
ip a
```

```bash - target
route
```

```bash - target
ip route
```

```bash - target
arp -a
```

```bash - target
ip neigh
```

```bash - target
netstat -tulpn
```

```bash - target
netstat -ano
```

```bash - target
ss -antp
```

Look for 
![[Port 3306 - MySQL ~#Local login]]

[[MySQL]]

Check out [[pspy]]


#### System Enumeration

```bash - target
history | grep pass
```

```bash - target
env
```

Look for kernel exploits:
```bash - target
uname -a
```

![[gcc#Compiling]]

```bash - target
cat /proc/version
```

```bash - target
cat /etc/issue
```

Look at CPU arch:
```bash - target
lscpu
```

Look at running services:
```bash - target
ps aux
```

See what is running as root user:
```bash - target
ps aux | grep root
```

```bash - kali
ps aux | grep "^root"
```

Quick check to see if mysql is running as root:
```bash - target
ps aux | grep root | grep sql
```

Are any local ports open running as root?
`root          705   0.0   2.5   364056   26604   ?   S   10:08   0:00   /usr/bin/php   -S   0.0.0.0:8080`

[[23._Listening port running as root]]  <<<<<<<<<<<

List content of /etc/fstab:
==be sure to check out the directory of any found shares! (/mnt/scripts)==
```bash - target
cat/etc/fstab
```

List all moutned drives on LInux:
```bash - target
mount
```

List all available drives:
```bash - target
lsblk
```

Listing Linux drivers:
```bash - target
lsmod
```

#### docker enumeration
By running the following command it is possible to can check whether we reside inside a docker container or not. If we are, then some of the control groups will belong to docker.
```bash - target
cat /proc/1/cgroup
```


```
cat /proc/1/cgroup 
12:huget1b: /docker /d8bba857b0018b4d1a15197b15ffeb34c02de1bad14366c22e7d9b3d418b15f 
11:blkio:/docker /d8bb4857b0018b4d1a15197b15ffeb34c02delbad14366c22fe7dIb3d418b15F 
10:devices:/docker /d8bbag57b0018b4d1a15197b15ffeb34c02delbad14366c22e7d9b3d418b15f 
9:pids:/docker /d8bba857b0018b4d1a15197b15Ffeb34c02de1bad14366c22fe7d9b3d418b15f
```

```
Furthermore by having a review at the file /opt/backup/docker-compose.yml , we can observe that the container is running with the flag privileged: true .
```

```bash - target
cat /opt/backup/docker-compose.yml
```

```
<SNTP>
	privileged: true 
	restart: unless-stopped
<SNIP>
```

Continue on with [[4._POST_EXPLOITATION/3._Apps_PrivEsc/Docker#Privileged]]
