In the following examples, we will use e1cnny as our target's username.

```
export USER=e1cnny
```

#### Example 1 KALI => JUMPBOX1

Connect to the netcat banner service listening on 8001:
```
ssh $USER@$JB1 -L 8001:127.0.0.1:8001
```

Then access the port locally:
```
nc 127.0.0.1 8001
```

We could verify the 8001 port is open on our Kali box by running:

```
sudo ss -antp | grep 8001
```

#### Example 2 KALI => JUMPBOX4

Connect to the web server listening on 127.0.0.1:8000:

```
ssh $USER@$JB4 -L 8000:127.0.0.1:8000
```

then browse to http://127.0.0.1:8000

#### Example 3 KALI => JUMPBOX1 => JUMPBOX2

ssh into JB2’s public IP address from JB1 using ssh’s -L switch.  NOTICE here, we are not using kali as the username, we are still using the target user in both commands!  We also have [[1._Cyber_Plumber_Lab#e1cnny's private key]].

```
ssh $USER@$JB1 -L 2222:$JB2:22
```

```
ssh $USER@127.0.0.1 -p 2222 -i e1cnny.key
```


#### Example 4 KALI => JUMPBOX1 => JUMPBOX2 => JUMPBOX3

ssh into JB3 while going through the jump boxes in this order: JB1 and JB2 using ssh’s -L switch.

```
ssh $USER@$JB1 -L 2222:$JB2:22
```

```
ssh $USER@127.0.0.1 -p 2222 -L 3333:$JB3:22
```

```
ssh $USER@127.0.0.1 -p 3333
```


#### Example 5 KALI => JUMPBOX4 => JUMPBOX3 => JUMPBOX2 => JUMPBOX1

SSH into JB1 while going through the jumpboxes in this order: JB4, JB3, and JB2 using ssh’s -L switch.

```
ssh $USER@$JB4 -L 2222:$JB3:22
```

```
ssh $USER@127.0.0.1 -p 2222 -L 3333:$JB2:22
```

```
ssh $USER@127.0.0.1 -p 3333 -L 4444:$JB1:22
```

```
ssh $USER@127.0.0.1 -p 4444
```

#### Example 6 KALI => JUMPBOX2 => JUMPBOX4 => JUMPBOX3 => JUMPBOX1

SSH into JB1 while going through the jump boxes in this order: JB2, JB4, and JB3 using ssh’s -J switch.

```
ssh -J e1cnny@$JB2,e1cnny@$JB4,e1cnny@$JB3 e1cnny@$JB1
```

#### Example 7 KALI => JB4 => TARGET1

ssh into JB1 through one of the jump boxes using ssh’s -L switch.  TARGET1 only has an internal IP address of 10.1.1.50.

credentials: dory / justkeepswimming

```
export USER2=dory
```

```
ssh $USER@$JB4 -L 2222:$TARGET1:22
```

```
ssh $USER2@127.0.0.1 -p 2222
```

#### Example 8 KALI => JB3 => TARGET1

While going through a jump box, connect to the netcat banner service listening on 127.0.0.1:9001 on TARGET1 using netcat and ssh’s -L switch.

credentials: dory / justkeepswimming

```
ssh $USER@$JB3 -L 2222:$TARGET1:22
```

```
ssh $USER2@127.0.0.1 -p 2222 -L 6666:127.0.0.1:9001
```

```
nc 127.0.0.1 6666
```


#### Example 9 KALI => TARGET3 => TARGET1

While going through a jumpbox, connect to the web server listening on 127.0.0.1:9000 on TARGET1 using a browser and ssh’s -L switch.

credentials: dory / justkeepswimming

```
ssh $USER@$JB3 -L 2222:$TARGET1:22
```

```
ssh $USER2@127.0.0.1 -p 2222 -L 7777:127.0.0.1:9000
```

then browse to http://127.0.0.1:7777

#### Example 10 KALI => JB3 => TARGET2

RDP into TARGET2 through one of the jump boxes using ssh’s -L switch.

credentials: dory / bLu3FisH

```
ssh $USER@$JB3 -L 33890:$TARGET2:3389
```

```
rdesktop 127.0.0.1:33890 -u $USER2 -p bLu3FisH
```

#### Example 11 KALI => JUMPBOX2 => TARGET2

Connect to TARGET2’s ipc$ SMB share (port TCP 445) using smbclient through one of the jump boxes using ssh’s -L switch.

credentials: dory / bLu3FisH

```
ssh $USER@$JB2 -L 4450:$TARGET2:445
```

```
smbclient \\\\127.0.0.1\\ipc$ -U $USER2 -p 4450
```

#### Example 12 KALI => JB1 => TARGET1 => TARGET2

RDP into TARGET2 from TARGET1 through one of the jump boxes using ssh’s -L switch. TARGET1 has an internal IP of 10.1.1.50 and TARGET2 has an internal IP of 10.1.1.60.

credentials: dory / justkeepswimming / bLu3FisH

```
ssh $USER@$JB4 -L 2222:$TARGET1:22
```

```
ssh $USER2@127.0.0.1 -p 2222 -L 33890:$TARGET2:3389
```

```
rdesktop 127.0.0.1 33890 -u dory -p bLu3FisH
```

#### Example 13 KALI => JB4

Use nmap on your Kali box to scan port 8000 on interface 127.0.0.1 of the jump boxes using ssh’s -L switch. Be sure to use these nmap switches: -n -Pn -sT -sV

```
ssh $USER@$JB1 -L 8888:127.0.0.1:8000
```

```
nmap -n -Pn -sT -sV 127.0.0.1 -p 8888
```

#### Example 14 KALI => JB1

Use nmap on your Kali box to scan port 8001 on interface 127.0.0.1 of the jump boxes using ssh’s -L switch. Be sure to use these nmap switches: -n -Pn -sT. Don’t use nmap’s -sV switch.

```
ssh $USER@$JB1 -L 8181:127.0.0.1:8001
```

```
nmap -n -Pn -sT 127.0.0.1 -p 8181
```

#### Example 15 KALI => JB3 => TARGET1

Use nmap on your Kali box to scan port 22 on target1 through one of the jump boxes using ssh’s -L switch. Be sure to use these nmap switches: -n -Pn -sT -sV

```
ssh $USER@$JB2 -L 2200:$TARGET1:22
```

```
nmap -n -Pn -sT -sV 127.0.0.1 -p 2200
```

#### Example 16 KALI => JB4 => TARGET2

Use nmap on your Kali box to scan ports 445, 3389, and 23423 on target2 through one of the jumpboxes using ssh’s -L switch 3 times. Be sure to use these nmap switches: -n -Pn -sT -sV

```
ssh $USER@$JB4 -L 4450:$TARGET2:445 -L 33890:$TARGET2:3389 -L 23423:$TARGET2:23423
```

```
nmap -n -Pn -sT -sV 127.0.0.1 -p 4450,33890,23423
```


#### Example 17 KALI => JB4

Brute force hidden web directories on one of the jump boxes using dirsearch and ssh’s -L switch. The web service is listening on 127.0.0.1:8000. Use Kali’s built in file for potential directories: /usr/share/dirb/wordlists/common.txt. Once you find the hidden directory, browse to it using your browser, or use curl to view the contents.

```
ssh $USER@$JB4 -L 8282:127.0.0.1:8000
```

```
dirsearch -w /usr/share/wordlists/dirb/common.txt -u http://127.0.0.1:8282
```



```
curl http ://127.0.0.1:8282/ admin/ -o -
```

