
Note that throughout this section, 9050 is used as the default SOCKS port. If you change it, you will also have to update your /etc/proxychains4.conf file. You can optionally supply the proxychains4 config file using -f /etc/proxychains4.conf.

In the following examples, we will use e1cnny as our target's username.
OSCP example:  Dynamic port forward from target to kali:5555
```bash - kali
ssh -N -D 127.0.0.1:1080 student@$TARGET -p 2222 
```
---

```
export USER=e1cnny
```

#### Example 1 KALI => JUMPBOX1

Connect to the netcat banner service listening on 127.0.0.1:8001 on one of the jump boxes using netcat and ssh’s -D switch. Be sure to doublecheck your /etc/proxychains4.conf file that the localnet line is commented out.

```
ssh $USER@$JB1 -D 9050
```

```
proxychains4 nc 127.0.0.1 8001
```

#### Example 2 KALI => JUMPBOX1

Connect to the web server listening on 127.0.0.1:8000 on one of the jump boxes using ssh’s -D switch and curl’s -x switch.

```
ssh $USER@$JB1 -D 9050
```

```
curl -x socks4://127.0.0.1:9050 http://127.0.0.1:8000
```

#### Example 3 KALI => JUMPBOX1

Connect to the web server listening on 127.0.0.1:8000 on one of the jump boxes using ssh’s -D switch, proxychains4, and curl.

```
ssh $USER@$JB1 -D 9050
```

```
proxychains4 curl http://127.0.0.1:8000
```

#### Example 4 KALI => JUMPBOX4 => JUMPBOX3

ssh into jb3’s public IP from jb4 using proxychains4 and ssh’s -D switch.

```
ssh $USER@$JB4 -D 9050
```

```
proxychains4 ssh $USER@$JB3
```

#### Example 5 KALI => JUMPBOX4 => TARGET1

SSH into target1 through one of the jump boxes using ssh’s -D switch.

credentials: dory / justkeepswimming

```
export USER2=dory
```

```
ssh jb4 -D 9050
```

```
proxychains4 ssh $USER2@$TARGET1
```

#### Example 6 KALI => JUMPBOX2 => TARGET1

Connect to the netcat banner service listening on 127.0.0.1:9001 on target1 using proxychains4 and ssh’s -L / -D switches.

credentials: dory / justkeepswimming

```
ssh $USER@$JB2 -L 2222:$TARGET1:22
```

```
ssh $USER2@127.0.0.1 -p 2222 -D 9050
```

```
proxychains4 nc 127.0.0.1 9001
```

#### Example 7 KALI => JUMPBOX2 => TARGET1

Connect to the web server listening on 127.0.0.1:9000 on target1 using proxychains4 and ssh’s -L / -D switches.

credentials: dory / justkeepswimming

```
ssh $USER@$JB2 -L 2222:$TARGET1:22
```

```
ssh $USER2@127.0.0.1 -p 2222 -D 9050
```

```
curl -x socks4://127.0.0.1:9050 http://127.0.0.1:9000
```

#### Example 8 KALI => JUMPBOX1 => TARGET2

RDP into target2 through one of the jump boxes using proxychains4 and ssh’s -D switch.

credentials: dory / bLu3FisH

```
ssh $USER@$JB1 -D 9050
```

```
proxychains4 rdesktop 10.1.1.60 -u dory -p bLu3FisH
```

#### Example 9 KALI => JUMPBOX1 => icanhazip.com

Use curl’s -x switch to access icanhazip.com through one of the jump boxes. You can try using -x socks4://127.0.0.1:9050, but -x socks5h://127.0.0.1:9050 may work better.

```
ssh $USER@$JB1 -D 9050
```

```
curl -x socks5h://127.0.0.1:9050 http://icanhazip.com
```

#### Example 10 KALI => JUMPBOX2 => icanhazip.com

Use curl, proxychains4, and ssh’s -D switch to access icanhazip.com through one of the jump boxes.

```
ssh $USER@$JB2 -D 9050
```

```
proxychains4 curl http://icanhazip.com
```

#### Example 11 KALI => JUMPBOX[1,2,3,4] => icanhazip.com


Use Firefox configured with a SOCKS proxy to access icanhazip.com through one of the jump boxes. Be sure to check the "Proxy DNS when using SOCKS v5".

```
ssh $USER@$JB1 -D 9050
```

Open firefox with foxy proxy enabled, visit http://icanhazip.com and note response.

```
ssh $USER@$JB2 -D 9050
```

Open firefox with foxy proxy enabled, visit http://icanhazip.com and note response.

```
ssh $USER@$JB3 -D 9050
```

Open firefox with foxy proxy enabled, visit http://icanhazip.com and note response.

```
ssh $USER@$JB4 -D 9050
```

All responses should be different ips addresses from each other.

#### Example 12 KALI => JUMPBOX2 => TARGET2

Connect to target2’s ipc$ SMB share (TCP 445) using smbclient through one of the jump boxes using ssh’s -D switch. 

credentials: dory / bLu3FisH

```
ssh $USER@$JB4 -D 9050
```

```
proxychains4 smbclient \\\\$TARGET2\\ipc$ -U dory -p 445
```

#### Example 13 KALI => JUMPBOX4

Use nmap on your Kali box to scan port TCP 8000 on interface 127.0.0.1 of the jump boxes using ssh’s -D switch. Be sure to use these nmap switches: -n -Pn -sT -sV

```
ssh $USER@$JB4 -D 9050
```

```
proxychains4 nmap -n -Pn -sT -sV 127.0.0.1 -p 8000
```


#### Example 14 KALI => JUMPBOX2 => TARGET1 

Use nmap on your Kali box to scan port TCP 22 on target1 through one of the jump boxes using ssh’s -D switch. Be sure to use these nmap switches: -n -Pn -sT -sV

```
ssh $USER@$JB2 -D 9050
```

```
proxychains4 nmap -n -Pn -sT -sV $TARGET1 -p 22
```

#### Example 15 KALI => JUMPBOX4 => TARGET2

Use nmap on your Kali box to scan ports TCP 445, 3389, and 23423 on target2 through one of the jump boxes using ssh’s -D switch. Be sure to use these nmap switches: -n -Pn -sT -sV

```
ssh $USER@$JB4 -D 9050
```

```
proxychains4 nmap -n -Pn -sT -sV $TARGET2 -p 445,3389,23423
```

#### Example 16 KALI => JUMPBOX4

Brute force hidden web directories on one of the jump boxes using wfuzz and ssh’s -D switch. Use wfuzz’s native proxy support (-p switch) The web service is listening on 127.0.0.1:8000. Use Kali’s built in file for potential directories: /usr/share/dirb/wordlists/common.txt. Once you find the hidden directory, use curl to view the contents.

```
ssh $USER@$JB4 -D 9050
```

```
proxychains4 dirsearch -w /usr/share/wordlists/dirb/common.txt -u http://127.0.0.1:8000
```

```
dirsearch -w /usr/share/wordlists/dirb/common.txt --proxy 127.0.0.1:9050 -u http://127.0.0.1:8000 
```


```
curl -x socks5://127.0.0.1:9050 http://127.0.0.1:8000/admin/index.html -o -
```

