OSCP example:  Remote port forward from target:5555 to kali:5555
```bash - kali
ssh -N -R $TARGET:5555:127.0.0.1:5555 -p 2222 student@$TARGET
```
---

![[Pasted image 20220426164453.png]]

#### Example 1 KALI <= JUMPBOX2

Start a netcat listener on your Kali box on TCP 6767, then ssh into one of the jump boxes and use ssh’s -R switch to forward traffic that hits port TCP 6000 on 127.0.0.1 of the jump box back through the tunnel to connect to port TCP 6767 on 127.0.0.1 of your Kali host. Once you ssh into one of jump boxes, try connecting to the netcat listener running on your host. If it works successfully, you should have a simple chat application between Kali and the jump box.

```
nc -lvnp 6767
```

```
ssh $USER@$JB2 -R 6000:127.0.0.1:6767
```

* On jump box:
```
nc 127.0.0.1 6000
```

#### Example 2 KALI <= JUMPBOX1 <= JUMPBOX2

Start a netcat listener on your Kali box on TCP 6767, then ssh into one of the jump boxes and use ssh’s -R switch to forward traffic that hits port TCP 60000 on the 10dot address of the jump box back through the tunnel to connect to port TCP 6767 on 127.0.0.1 of your host. Once you ssh into one of jump boxes, try connecting to the netcat listener running on your Kali host. The jump box firewalls only allow traffic to destination ports TCP 60000-61000 on the 10dot IP address, so a port in that range must be used.

```
nc -lvnp 6767
```

```
ssh $USER@$JB1 -R 10.1.1.10:60000:127.0.0.1:6767
```

* On jump box:
```
nc 10.1.1.10 60000
```

#### Example 3 KALI <= JUMPBOX4

Start a Python web server on your Kali box, listening on interface 127.0.0.1 on port 10000 (python3 -m http.server --bind 127.0.0.1 10000 --directory /tmp). Be careful which directory you specify to serve files from, because other users could browse to it when the reverse tunnel is up! If your version of http.server, does not support --directory, it defaults to whatever your current working directory is. ssh into one of the jump boxes and use ssh’s -R switch to forward traffic that hits port TCP 11111 on 127.0.0.1 of the jump box back through the tunnel to connect to port TCP 10000 on 127.0.0.1 of your host. Once you ssh into one of jump boxes, try connecting to the web server running on your host using curl (curl http://127.0.0.1:11111 -o -)

```
python3 -m http.server --bind 127.0.0.1 10000 --directory /tmp
```

```
ssh $USER@$JB4 -R 11111:127.0.0.1:10000
```

* On jump box:
```
curl http://127.0.0.1:11111 -o -
```

#### Example 4 KALI <= JUMPBOX1 <= JUMPBOX2

Start a Python web server on your Kali box, listening on interface 127.0.0.1 on port 10000 (python3 -m http.server --bind 127.0.0.1 10000 --directory /tmp). Be careful which directory you specify to serve files from, because other users could browse to it when the reverse tunnel is up! If your version of http.server, does not support --directory, it defaults to whatever your current working directory is. ssh into jb1 and use ssh’s -R switch to forward traffic that hits port TCP 60500 on the 10dot address back through the tunnel to connect to port TCP 10000 on 127.0.0.1 of your host. Then, ssh into jb2 without any tunnels, and try connecting to the web server listener running on your Kali host by connection through jb1. The jumpboxes only allow traffic to TCP 60000-61000 on the 10dot IP address, so a port in that range must be used.

```
python3 -m http.server --bind 127.0.0.1 10000 --directory /tmp
```

```
ssh $USER@$JB1 -R $JB1:60500:127.0.0.1:10000
```

```
ssh $USER@$JB2
```

* On jump box:
```
curl http://10.1.1.10:60500 -o -
```

