
#### Example 1 KALI => JUMPBOX2 => TARGET2 => TARGET1

SSH into target1 from target2, through one of the jumpboxes using the ssh -L switch and the Windows netsh command on target2. You will have to RDP into target2 as administrator (administrator / Tunn3lNinj4) in order to apply the netsh command to setup the port redirection. Only two users are allowed to RDP into target2 at a time. Be courteous if users are already RDP’d in and don’t kick them off.

credentials: dory / justkeepswimming

target1 has an internal IP of 10.1.1.50. target2 only has an internal IP address of 10.1.1.60. RDP in as administrator to target2 to setup netsh command.

```
ssh $USER@$JB2 -D 9050
```

* In other Kali shell:
```
proxychains4 rdesktop $TARGET2 -u administrator -p Tunn3lNinj4
```

Launch cmd.exe and create a port redirect using netsh. The listenport should be random.

```
netsh interface portproxy set v4tov4 listenport =2222 connectaddress =$TARGET1 connectport =22 protocol=tcp
```

Check that it exists.
```
netsh interface portproxy show all
```

Sign out of the RDP session, then exit out of the ssh connection to jb2 and setup a new one. This time, setup up the port forward to hit the port on the target2 specified by the listenport option. 

SHELL 1:
```
ssh $USER@$JB2 -L 1111:$TARGET2:2222
```

Finally, ssh into target1 from shell 2.

SHELL 2:

credentials dory / justkeepswimming

```
export USER2=dory
```

```
ssh $USER2@127.0.0.1 -p 1111
```

Run a netstat to ensure your connection is coming from TARGET2.

```
netstat -nat | egrep ESTA
```











